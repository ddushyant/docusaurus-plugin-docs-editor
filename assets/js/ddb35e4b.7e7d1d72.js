"use strict";(self.webpackChunkpreview=self.webpackChunkpreview||[]).push([[669],{5616:function(e,t,n){n.r(t),n.d(t,{default:function(){return we}});var r=n(5861),a=n(7757),o=n.n(a),c=n(7294),u=n(5574),s=n.n(u),i=n(8194),l=n.n(i),p=n(2471),d=n.n(p),f=n(8944),m=n(2263),h=n(8084),g=n(2859),v=n(6775),w=n(3085),b=n(3721),x=n(4040),k=n(7207),E=n(6644),Z=n(7586),y=n(8718),_=n(3564),N=n(2991),S=n(4872),C=n(8236),L=n(9995),P=n(3098),T=n(1868),z=n(6664),A=n(9545),H=n(6201),I=n(5664),R=n(3984),B=n(756),q=n(3573),M=n(8394),j=n(4533),$=n(4678),O=n(3173),U=n(8107),F=n(7091),G=n(3938),D=n(5413),Q=n(3960),V=n(6845),J=n(1219),W=n.n(J),K=n(9748),X=n(8624),Y=n(3247),ee=n(5323),te=n(8243),ne=n(6728),re=n.n(ne),ae=n(2254),oe=n.n(ae),ce=n(3240),ue=n(7892),se=n(7055),ie=n.n(se),le=n(7855),pe=[1,2,3,4,5,6],de=function(e){var t=e.children;return c.createElement("div",{className:(0,f.Z)("editor__group","margin-vert--sm","padding-horiz--xs")},t)},fe=function(e){var t=e.editor,n=e.name,r=e.action,a=e.children;return c.createElement("button",{className:(0,f.Z)("editor__control","margin-horiz--xs",n&&t.isActive(n)&&"editor__control--active"),onClick:r},c.createElement("span",{className:"editor__icon"},a))};function me(e){var t=e.editor,n=e.save,r=e.submit,a=e.dirty,o=e.syncing,u=e.pullrequest,s=e.className;return t?c.createElement(c.Fragment,null,c.createElement(g.Z,null,c.createElement("link",{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"})),c.createElement("div",{className:(0,f.Z)("editor__menu",s)},c.createElement("div",{className:(0,f.Z)("editor__submenu")},c.createElement(de,null,c.createElement(fe,{editor:t,action:function(){return t.chain().focus().undo().run()}},"undo"),c.createElement(fe,{editor:t,action:function(){return t.chain().focus().redo().run()}},"redo")),c.createElement(de,null,c.createElement("select",{className:(0,f.Z)("editor__select","margin-horiz--xs"),value:function(){var e=[];t.isActive("code")&&e.push("code"),t.isActive("paragraph")&&e.push("paragraph");for(var n,r=(0,le.Z)(pe);!(n=r()).done;){var a=n.value;t.isActive("heading",{level:a})&&e.push(a.toString())}return 1==e.length?e[0]:""}(),onChange:function(e){e.preventDefault();var n=e.target.value;"code"===n?t.chain().focus().clearNodes().setCode().run():"paragraph"===n?t.chain().focus().unsetCode().setParagraph().run():pe.includes(n)&&t.chain().focus().clearNodes().unsetCode().setHeading({level:n}).selectParentNode().unsetCode().run()}},c.createElement("option",{hidden:!0,disabled:!0,value:""}),c.createElement("option",{value:"paragraph"},"Normal text"),pe.map((function(e){return c.createElement("option",{key:e,value:e},"Heading "+e)})),c.createElement("option",{value:"code"},"Inline code"))),c.createElement(de,null,c.createElement(fe,{editor:t,action:function(){return t.chain().focus().toggleBold().run()},name:"bold"},"format_bold"),c.createElement(fe,{editor:t,action:function(){return t.chain().focus().toggleItalic().run()},name:"italic"},"format_italic"),c.createElement(fe,{editor:t,action:function(){if(t.isActive("link")){var e=t.state,n=e.selection,r=n.from,a=n.to,o=[];e.doc.nodesBetween(r,a,(function(e){o=[].concat(o,e.marks)}));var c=o.find((function(e){return"link"===e.type.name})),u=c&&c.attrs.href?c.attrs.href:"";(u=window.prompt("Update or remove the URL",u))?t.chain().focus().extendMarkRange("link").setLink({href:u}).run():t.chain().focus().unsetLink().run()}else{var s=window.prompt("Add a URL");s&&t.chain().focus().extendMarkRange("link").setLink({href:s}).run()}},name:"link"},"link")),c.createElement(de,null,c.createElement(fe,{editor:t,action:function(){return t.chain().focus().toggleBulletList().run()},name:"bulletList"},"format_list_bulleted"),c.createElement(fe,{editor:t,action:function(){return t.chain().focus().toggleOrderedList().run()},name:"orderedList"},"format_list_numbered"),c.createElement(fe,{editor:t,action:function(){return t.chain().focus().toggleCodeBlock().run()},name:"codeBlock"},"code"),c.createElement(fe,{editor:t,action:function(){return t.chain().focus().toggleBlockquote().run()},name:"blockquote"},"format_quote")),c.createElement(de,null,c.createElement(fe,{editor:t,action:function(){return t.chain().focus().setHorizontalRule().run()}},"horizontal_rule"),c.createElement(fe,{editor:t,action:function(){return t.chain().focus().setHardBreak().run()}},"keyboard_return")),c.createElement(de,null,c.createElement(fe,{editor:t,action:function(){return t.chain().focus().unsetAllMarks().clearNodes().run()}},"format_clear"))),c.createElement("div",{className:(0,f.Z)("editor__submenu")},c.createElement(de,null,c.createElement("button",{className:"button button--sm button--primary margin-horiz--xs",disabled:o||!a,onClick:function(){t.chain().focus().run(),n()}},"Save"),u?c.createElement("a",{className:"button button--sm button--outline button--primary margin-horiz--xs",href:u,target:"_blank",rel:"noreferrer"},"Review"):c.createElement("button",{className:"button button--sm button--primary margin-horiz--xs",disabled:o,onClick:function(){t.chain().focus().run(),r()}},"Submit"))))):null}function he(e){var t=e.editor,n=e.className;return c.createElement("div",{className:(0,f.Z)("editor__page",n)},c.createElement(_.kg,{editor:t,className:"editor__content"}))}function ge(){return null}function ve(e){var t=e.node.attrs.language,n=e.updateAttributes,r=e.extension,a=(0,c.useState)(t),o=a[0],u=a[1];return c.createElement(_.T5,{className:"codeblock"},c.createElement("select",{className:"codeblock__language",contentEditable:!1,defaultValue:t,onChange:function(e){return function(e){u(e),n({language:e})}(e.target.value)}},c.createElement("option",{value:""},"auto"),c.createElement("option",{disabled:!0},"---"),r.options.lowlight.listLanguages().map((function(e,t){return c.createElement("option",{key:t,value:e},e)}))),c.createElement("pre",{className:"codeblock__code"},c.createElement(_.ms,{as:"code",className:(0,f.Z)(o?"language-"+o:"")})))}function we(e){var t=e.options,n=e.className,a=(0,c.useState)(""),u=a[0],i=a[1],p=(0,c.useState)(""),b=p[0],x=p[1],k=(0,c.useState)({}),E=k[0],Z=k[1],y=(0,c.useState)(""),J=y[0],ne=y[1],ae=(0,c.useState)(""),se=ae[0],le=ae[1],pe=(0,c.useState)({}),de=pe[0],fe=pe[1],we=(0,c.useState)(!1),be=we[0],xe=we[1],ke=(0,c.useState)(""),Ee=ke[0],Ze=ke[1],ye=(0,c.useState)(""),_e=ye[0],Ne=ye[1],Se=(0,c.useState)(!1),Ce=Se[0],Le=Se[1],Pe=(0,h.usePluginData)("docusaurus-plugin-docs-editor").basePath,Te=(0,v.TH)().pathname,ze=(0,m.Z)().siteConfig,Ae=ze.organizationName,He=ze.projectName,Ie=t.docs,Re=(Ie=void 0===Ie?{}:Ie).owner,Be=void 0===Re?Ae:Re,qe=Ie.repo,Me=void 0===qe?He:qe,je=Ie.path,$e=void 0===je?"docs":je,Oe=t.static,Ue=(Oe=void 0===Oe?{}:Oe).path,Fe=void 0===Ue?"static":Ue,Ge=t.github,De=(Ge=void 0===Ge?{}:Ge).clientId,Qe=Ge.tokenUrl,Ve=Ge.method,Je=void 0===Ve?"GET":Ve,We=(0,_.jE)({extensions:[N.ZP,S.ZP,C.ZP,L.ZP,P.Z.extend({addNodeView:function(){return(0,_.fW)(ve)}}).configure({lowlight:w.$}),T.Z,z.Z,A.Z,H.Z,I.Z,R.Z,q.ZP,B.ZP,M.Z.configure({openOnClick:!1}),j.Z,$.ZP,O.Z,U.Z],autofocus:"start",onUpdate:function(e){var t=e.editor;Ne(t.getHTML())}}),Ke=function(e){var t=new(d())("https://github.com/login/oauth/authorize").query({client_id:De,scope:"public_repo",redirect_uri:e}).toString();window.location.replace(t)},Xe=function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=Je,e.next="GET"===e.t0?3:"POST"===e.t0?4:5;break;case 3:return e.abrupt("return",fetch(Qe+t).then((function(e){return e.json()})).then((function(e){return e.token})));case 4:return e.abrupt("return",fetch(Qe,{method:"POST",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify({code:t})}).then((function(e){return e.json()})).then((function(e){return e.token})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(){var e=(0,r.Z)(o().mark((function e(){var t,n,a,c,u,s,i,l,p,f,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new(d()),n=d().parseQuery(t.query()),!(a=n.code)){e.next=18;break}return c=t.removeQuery("code").toString(),window.history.replaceState(window.history.state,"",c),e.next=7,Xe(a);case 7:return u=e.sent,s=F.v.plugin(G.T),i=new s({auth:u}),l=i.hook,p=i.rest,l.error("request",function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof D.L&&403===t.status)){e.next=5;break}return e.next=3,Ye();case 3:e.next=6;break;case 5:throw t;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=13,p.users.getAuthenticated();case 13:return f=e.sent,m=f.data.login,e.abrupt("return",{api:p,user:m});case 18:Ke(t);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),et=function(){var e=(0,r.Z)(o().mark((function e(){var t,n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.api.repos.createFork({owner:Be,repo:Me});case 2:return t=e.sent,n=t.data,r=n.name,a=n.owner.login,e.next=8,new Promise((function(e,t){var n=setInterval((function(){de.api.repos.get({owner:a,repo:r}).then((function(t){clearInterval(n),e(t)})).catch((function(e){404!==e.status&&t(e)}))}),1e3)}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tt=function(){var e=(0,r.Z)(o().mark((function e(t,n){var r,a,c,u,s,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de.api.repos.get({owner:t,repo:n});case 3:case 11:r=e.sent,e.next=15;break;case 6:if(e.prev=6,e.t0=e.catch(0),404!==e.t0.status||t===Be){e.next=14;break}return e.next=11,et();case 14:throw e.t0;case 15:if(a=r.data,c=a.name,u=a.owner.login,s=a.parent,u===Be){e.next=24;break}if(!s){e.next=23;break}if(i=s.name,s.owner.login===Be||i===Me){e.next=21;break}throw"Repo is not a fork of "+Be+"/"+Me;case 21:e.next=24;break;case 23:throw"Repo is not a fork of "+Be+"/"+Me;case 24:return e.abrupt("return",{owner:u,repo:c});case 25:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),nt=function(){var e=(0,r.Z)(o().mark((function e(t,n,r){var a,c,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.api.repos.get({owner:Be,repo:Me});case 2:return a=e.sent,c=a.data.default_branch,e.next=6,de.api.repos.getBranch({owner:Be,repo:Me,branch:c});case 6:return u=e.sent,s=u.data.commit.sha,e.next=10,de.api.git.createRef({owner:t,repo:n,sha:s,ref:"refs/heads/"+r});case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),rt=function(){var e=(0,r.Z)(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de.api.repos.getBranch({owner:t,repo:n,branch:r});case 3:case 10:e.next=13;break;case 5:if(e.prev=5,e.t0=e.catch(0),404!==e.t0.status){e.next=12;break}return e.next=10,nt(t,n,r);case 12:throw e.t0;case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n,r){return e.apply(this,arguments)}}(),at=function(){var e=(0,r.Z)(o().mark((function e(t,n,r,a){var c,u,i,p,d,f,m,h,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.api.repos.getContent({owner:t,repo:n,path:a,ref:"refs/heads/"+r});case 2:return c=e.sent,u=c.data,i=u.content,p=l().decode(s().decode(i)),d="https://raw.githubusercontent.com/"+t+"/"+n+"/"+r+"/"+Fe+"/",f=(0,ue.l)().use(Y.Z).use(ee.Z,["yaml"]).use(oe(),{yaml:ie().parse,remove:!0}).use(te.Z).use(re(),{absolutePath:d}).use(ce.Z).use(Q.Z),e.next=10,f.process(p);case 10:m=e.sent,h=m.data,g=m.value,Z(h),We.chain().setContent(g).focus("start").run(),Ze(We.getHTML()),Ne(We.getHTML());case 17:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),ot=function(){var e=(0,r.Z)(o().mark((function e(t,n,r,a){var c,u,p,f,m,h,g,v,w,b,x;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="https://raw.githubusercontent.com/"+t+"/"+n+"/"+r+"/"+Fe+"/",u=function(e){return new(d())(e).relativeTo(c).toString()},p=We.getHTML(),f=(0,ue.l)().use(V.Z).use(W(),u).use(K.Z).use(X.Z,{bullet:"-",rule:"-",listItemIndent:"mixed"}),e.next=6,f.process(p);case 6:return m=e.sent,h=m.value,E&&(g=ie().stringify(E),h="---\n"+g+"---\n\n"+h),v=s().encode(l().encode(h)),xe(!0),e.next=13,de.api.repos.getContent({owner:t,repo:n,path:a,ref:"refs/heads/"+r});case 13:return w=e.sent,b=w.data,x=b.sha,i("Saving changes..."),e.next=19,de.api.repos.createOrUpdateFileContents({owner:t,repo:n,branch:r,path:a,sha:x,content:v,message:"Edit "+se});case 19:return Ze(p),i("Changes have been saved, syncing with GitHub..."),e.next=23,new Promise((function(e,o){var c=setInterval((function(){de.api.repos.getContent({owner:t,repo:n,path:a,ref:"refs/heads/"+r}).then((function(t){t.data.sha!=x&&(clearInterval(c),xe(!1),i("Changes have been saved"),e(null))})).catch((function(e){404!==e.status&&(xe(!1),i("An error occured during sync"),o(e))}))}),1e3)}));case 23:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),ct=function(){var e=(0,r.Z)(o().mark((function e(t,n){var r,a,c,u,s,l,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t+":"+n,e.next=3,de.api.pulls.list({owner:Be,repo:Me,state:"open",head:r});case 3:if(a=e.sent,!(c=a.data).length){e.next=10;break}x(c[0].html_url),i("Changes already submitted"),e.next=21;break;case 10:return i("Submitting changes..."),e.next=13,de.api.repos.get({owner:Be,repo:Me});case 13:return u=e.sent,s=u.data.default_branch,e.next=17,de.api.pulls.create({owner:Be,repo:Me,base:s,head:r,title:"Edit "+se});case 17:l=e.sent,p=l.data.html_url,x(p),i("Changes submitted");case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ut=function(){var e=(0,r.Z)(o().mark((function e(){var t,n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye();case 2:t=e.sent,n=new(d())(Te).relativeTo(Pe+"/").toString(),r=d().joinPaths($e,n).suffix("md").toString(),console.log(r),a="edit/"+r.replace(/[/.]/g,"-"),fe(t),ne(a),le(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),st=function(){var e=(0,r.Z)(o().mark((function e(){var t,n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(de.user,Me);case 2:return t=e.sent,n=t.owner,r=t.repo,e.next=7,rt(n,r,J);case 7:return a=e.sent,e.next=10,at(n,r,a,se);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),it=function(){var e=(0,r.Z)(o().mark((function e(){var t,n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ce){e.next=11;break}return e.next=3,tt(de.user,Me);case 3:return t=e.sent,n=t.owner,r=t.repo,e.next=8,rt(n,r,J);case 8:return a=e.sent,e.next=11,ot(n,r,a,se);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),lt=function(){var e=(0,r.Z)(o().mark((function e(){var t,n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(de.user,Me);case 2:return t=e.sent,n=t.owner,r=t.repo,e.next=7,rt(n,r,J);case 7:if(a=e.sent,!Ce){e.next=11;break}return e.next=11,ot(n,r,a,se);case 11:return e.next=13,ct(n,a);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){document.documentElement.dataset.theme="light",i("Getting ready..."),ut(),i("Ready to edit")}),[]),(0,c.useEffect)((function(){de&&J&&se&&st()}),[de,J,se]),(0,c.useEffect)((function(){Le(_e!==Ee)}),[_e,Ee]),c.createElement(c.Fragment,null,c.createElement(g.Z,null,c.createElement("title",null,"Editor")),de?c.createElement("div",{className:(0,f.Z)("editor",n)},c.createElement("div",{className:"editor__announcements padding-horiz--md padding-vert--xs"},u),c.createElement(me,{editor:We,save:it,submit:lt,dirty:Ce,syncing:be,pullrequest:b}),c.createElement(he,{editor:We})):c.createElement(ge,null))}w.$.registerLanguage("c",b.Z),w.$.registerLanguage("javascript",x.Z),w.$.registerLanguage("markdown",k.Z),w.$.registerLanguage("python",E.Z),w.$.registerLanguage("rust",Z.Z),w.$.registerLanguage("shell",y.Z)}}]);